<!DOCTYPE html>
<html>
<head>
    <!-- Import Material Google Icon Fonts -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Materialize.css CDN-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
          integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- Custom Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Raleway:400,700&display=swap" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/animate.css')}}">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Home - Kumi Team Messenger: Team 10</title>
    <link rel="apple-touch-icon" href="{{url_for('static', filename='images/apple-touch-icon-152x152.png')}}">
    <link rel="shortcut icon" type="image/x-icon" href="{{url_for('static', filename='images/favicon-32x32.png')}}">
    <style>
        .tabs .indicator {
            background-color: #0d47a1;
        }

        body {
            align-items: center;
        }

        .container {
            display: flex;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
        }

            .container .row {
                margin: 0 auto;
            }

        /* label focus color */
        .input-field input[type=text]:focus + label, .input-field input[type=password]:focus + label {
            color: #2196f3;
        }
        /* label underline focus color */
        .input-field input[type=text]:focus, .input-field input[type=password]:focus {
            border-bottom: 1px solid #2196f3;
            box-shadow: 0 1px 0 0 #2196f3;
        }
    </style>
</head>    
<body>
    <div class="container">
        <div class="row valign-wrapper">
            <div class="col s12 l4 offset-m2 valign hide-on-small-only">
                <div class="card animated zoomIn">
                    <div class="card-image center-align">
                        <img src="{{url_for('static', filename='images/logo_transparent.png')}}">
                    </div>
                    <div class="card-action center-align">
                        blah blah blah
                    </div>
                </div>
            </div>
            <div class="col s12 l4 valign">
                <div class="card animated zoomIn">
                    <form method="post" action="/login" novalidate>
                        <div class="card-image center-align hide-on-large-only">
                            <img src="{{url_for('static', filename='images/logo_transparent.png')}}">
                        </div>
                        <div class="card-content white-text center-align">
                            <span class="card-title black-text">
                                Team 10<br />
                                <!-- radio options and their labels-->
                                <label id="label-si" for="sign-in" class="radio-label waves-effect waves-light btn-flat blue white-text"><input id="sign-in" type="radio" name="login-option" value="sign-in" checked />Sign In</label>
                                {% if data and data.email %}<label id="label-su" for="sign-up" class="radio-label waves-effect waves-light btn-flat"><input id="sign-up" type="radio" name="login-option" value="sign-up" />Sign Up</label>{% endif %}
                                <label id="label-rl" for="reset-login" class="radio-label waves-effect waves-light btn-flat"><input id="reset-login" type="radio" name="login-option" value="reset-login" />Reset</label>
                            </span>
                            <div class="center-align indigo-text">
                                <fieldset>
                                    <!-- the value attribute will be sent to the server-->
                                    {% with messages = get_flashed_messages() %}
                                    {% if messages %}
                                    <ul class="">
                                        {% for message in messages %}
                                        <li>{{ message }}</li>
                                        {% endfor %}
                                    </ul>
                                    {% endif %}
                                    {% endwith %}

                                    {{ form.hidden_tag() }}
                                    <div class="input-field col s12 sign-in sign-up reset-login">
                                        {{ form.email(id="email") }}
                                        <label for="email">Email</label>
                                        {% for error in form.email.errors %}
                                        <span class="error">[{{ error }}]</span>
                                        {% endfor %}
                                    </div>

                                    <div class="input-field col s12 sign-up">
                                        {{ form.firstname(id="firstname") }}
                                        <label for="firstname">First Name</label>
                                        {% for error in form.firstname.errors %}
                                        <span class="error">[{{ error }}]</span>
                                        {% endfor %}
                                    </div>

                                    <div class="input-field col s12 sign-up">
                                        {{ form.lastname(id="lastname") }}
                                        <label for="lastname">Last Name</label>
                                        {% for error in form.lastname.errors %}
                                        <span class="error">[{{ error }}]</span>
                                        {% endfor %}
                                    </div>
                                    <div class="input-field col s12 sign-in sign-up">
                                        {{ form.password(id="password1") }}
                                        <label for="password1">Password</label>
                                        {% for error in form.password.errors %}
                                        <span class="error">[{{ error }}]</span>
                                        {% endfor %}
                                    </div>
                                    <div class="input-field col s12 sign-up">
                                        {{ form.password2( id="password2") }}
                                        <label for="password2">Re-Enter Password</label>
                                        {% for error in form.password2.errors %}
                                        <span class="error">[{{ error }}]</span>
                                        {% endfor %}
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="card-action center-align">
                            <input class="waves-effect waves-light btn-flat blue white-text" id="submit" name="submit" type="submit" value="Sign In">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!--inserting jQuery from the Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        /* Materialize components initialization */


        /* Script initialization */
        $(document).ready(function () {
            /* Init functions at start */

            // Hide all input fields
            $('.sign-in, .sign-up, .reset-login').css('display', 'none');

            // Only show Sign-In class
            $('.sign-in').css('display', 'block');

            // Radio options update
            $('input[type=radio]').on('change', function () {
                var currentSelection = $(this).val()
                $('.sign-in, .sign-up, .reset-login').slideUp(function () {
                    $("." + currentSelection).slideDown(1000);
                });

                if ($(this).prop('checked')) {
                    $('input[type=radio]').parent('label').removeClass('blue').removeClass('white-text');
                    $(this).parent('label').addClass('blue').addClass('white-text');
                    $('html, body').animate({
                        scrollTop: $("#submit").offset().top
                    }, 2000);
                }
                applyButtonText($(this));
            })

            // applies the apprproiate "submit" text based upon the selected radio/login option
            function applyButtonText(loginOption) {
                $submitButton = $("#submit");
                $("#email").prop('disabled', false).val('');
                $("#email + label").css('display', 'block');

                switch (loginOption.attr("id")) {
                    case "sign-in":
                        $submitButton.val("Sign In");
                        break;
                    case "sign-up":
                        $submitButton.val("Sign Up");
                        $("#email + label").css('display', 'none');
                        $("#email").prop('disabled', true).val("{% if data and data.email %}{{ data.email | safe }}{% endif %}");
                        break;
                    case "reset-login":
                        $submitButton.val("Reset Password");
                        break;
                }
            }
        });
    </script>
</body>
    

</html>